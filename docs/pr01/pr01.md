# Proyecto 1. Infraestructura Segura de Servidores Internos y Públicos en AWS

## Contexto

La empresa **NovaWeb Solutions** se dedica al desarrollo y despliegue de sitios web para clientes externos. Hasta ahora, su entorno de pruebas y publicación se encontraba en servidores locales, pero ha decidido migrarlo completamente a la nube de AWS.

Tu misión como ingeniero DevOps en la empresa es diseñar y desplegar la infraestructura base que dará soporte a sus proyectos, asegurando conectividad, seguridad, y un aprovechamiento eficiente de los recursos.

---

## Objetivos del proyecto

Implementar una infraestructura propia en AWS que contemple:

* Una red estructurada en varias subredes.
* Servidores Ubuntu distribuidos entre subredes públicas y privadas.
* Un servidor web accesible desde Internet.
* Un sistema de almacenamiento compartido entre varios servidores.
* Un volumen adicional en alguno de los servidores para almacenamiento o copias.
* Gestión controlada del acceso a Internet en las instancias privadas.

---

## Requisitos funcionales

### Diseño de red

* Diseña la estructura de red completa a partir de la **VPC 172.16.0.0/16**.
* Define cuántas subredes necesitas, qué tamaño debe tener cada una y su función dentro de la infraestructura (públicas, privadas, etc.).
* Establece las rutas necesarias para que cada servidor tenga la conectividad requerida según su propósito.

### Servidores

* Despliega al menos **tres instancias Ubuntu Server LTS**, con roles diferenciados:

    * **Servidor Web (público):** alojará un sitio web accesible desde Internet mediante Apache u otro servidor similar.

        - Este servidor debe ser accesible por HTTP/HTTPS y SSH.
        - Su dirección IP pública debe mantenerse fija a lo largo del tiempo (aunque la instancia se detenga y se inicie de nuevo).
        - Deberá servir el contenido que encontrarás en el repositorio de GitHub que contiene una web de muestra:
    [`https://github.com/ies-camp-de-morvedre/hello-cloud`](https://github.com/IES-CAMP-DE-MORVEDRE/hello-cloud).

    * **Servidor Interno de Aplicaciones (privado):** destinado a tareas de soporte y procesamiento interno.
        - No debe tener acceso directo desde Internet.
    
    * **Servidor de Copias o Contenidos (privado):** centralizará archivos y respaldos utilizados por otros servidores.
        - Accesible únicamente desde la VPC.

* En el servidor de Copias, crea y configura un **dispositivo o volumen adicional** para almacenamiento específico (datos, copias o logs).
* Elige para cada servidor la **familia de instancia** más adecuada según su función y justifica tu elección en la memoria técnica.

### Almacenamiento compartido

* Implementa un **sistema de archivos compartido** que permita que al menos dos servidores trabajen sobre el mismo conjunto de datos (por ejemplo, el contenido multimedia de la web).


### Acceso y seguridad

* Define **grupos de seguridad** adaptados a los diferentes roles de los servidores, siguiendo el principio de mínimo privilegio.
* Asegura que:

    * El servidor web sea accesible únicamente por los puertos necesarios.
    * Los servidores privados puedan comunicarse entre ellos y con el servidor web según sus necesidades.
    * No exista acceso SSH directo desde Internet a los servidores privados.
* Durante el proceso de despliegue y configuración, **las instancias privadas deben poder acceder a Internet para instalar y actualizar paquetes**.
    * Con el fin de economizar costos,tras la puesta en marcha del entorno, el acceso a Internet desde las máquinas internas deberá quedar deshabilitado.

### Verificaciones

* Desde tu equipo local, deberás poder acceder al servidor web y visualizar correctamente el sitio servido por Apache.
* Los servidores deben ser accesibles por SSH según las reglas definidas.
* El sistema de archivos compartido debe estar operativo y accesible entre los servidores que lo utilicen.

---

## Entregables

El proyecto debe incluir:

* Un **diagrama de arquitectura** donde se representen la VPC, las subredes, las rutas, las instancias desplegadas y los servicios que hayas necesitado.
* Una **memoria técnica** que describa:

    * La justificación del diseño de red y segmentación elegidos.
    * Los tipos de instancia seleccionados y su razón de elección.
    * La configuración de seguridad y conectividad.
    * La verificación de la conexión a cada una de las instancias utilizando claves públicas/privadas.
    * El proceso de montaje del almacenamiento compartido y del volumen adicional.
    * Las pruebas de verificación realizadas.

!!! tip
    Para el diagrama de arquitectura utiliza [https://app.diagrams.net/](https://app.diagrams.net/). Puedes utilizar como base el diagrama [ejemplo](./VPC.drawio).

!!! note "Importante"
    El documento entregable deberá seguir la estructura definida en el [este documento](./Normativa%20para%20la%20entrega%20de%20Trabajos-2025-26.pdf).
---

## Ayuda

### Instalación de servidor web

El servicio del servidor web se deberá instalar en el momento de creación de la instancia. 

Los comandos necesarios para instalar el servidor web:

``` bash
sudo apt update
sudo apt install apache2 -y
```

### Configuración del servidor web

Para que Apache sirva nuestra página web, copia el contenido del repositorio clonado a `/var/www/html/`


---

## **Reto adicional (opcional)**

* Configura una tarea programada en el servidor de copias que sincronice periódicamente los datos del almacenamiento compartido con un directorio local.

---

